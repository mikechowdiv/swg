use car
/* CAR INFO */
CREATE TABLE [dbo].[AspNetRoles] (
    [Id] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
CREATE TABLE [dbo].[AspNetUserRoles] (
    [UserId] [nvarchar](128) NOT NULL,
    [RoleId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
CREATE TABLE [dbo].[AspNetUsers] (
    [Id] [nvarchar](128) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
CREATE TABLE [dbo].[AspNetUserClaims] (
    [Id] [int] NOT NULL IDENTITY,
    [UserId] [nvarchar](128) NOT NULL,
    [ClaimType] [nvarchar](max),
    [ClaimValue] [nvarchar](max),
    CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
CREATE TABLE [dbo].[AspNetUserLogins] (
    [LoginProvider] [nvarchar](128) NOT NULL,
    [ProviderKey] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201704061506102_init', N'CarDealerBeta.Migrations.Configuration',  0x1F8B0800000000000400DD5C5B6FDB36147E1FB0FF20E8691B522B97B5E802BB45EA245BB0E6823A2DF656D012ED0895284DA2D204C37ED91EF693F617762851375E74B115DB29060CB578F8F1F0F02379787898FFFEF977FCF6C1F78C7B1CC56E4026E6C168DF3430B103C725CB8999D0C58BD7E6DB37DF7F373E73FC07E3532E77C4E4A0268927E61DA5E1B165C5F61DF6513CF25D3B0AE260414776E05BC809ACC3FDFD5FAC83030B038409588631FE9010EAFA38FD013FA701B1714813E45D060EF662FE1D4A6629AA71857C1C87C8C613738AA2538C3C1CBDC3148D3279D338F15C04BACCB0B7300D44484011054D8F3FC67846A3802C67217C40DEED6388416E81BC18F31E1C97E25D3BB37FC83A63951573283B8969E0F7043C38E2D6B1C4EA2BD9D82CAC07F63B033BD347D6EBD48613F3C2C1E9A70F810706101B3C9E7A11139E9897451327717885E928AF38CA20CF2380FB1A445F4655C43DA373BDBD824D87A37DF6DF9E314D3C9A447842704223E4ED1937C9DC73EDDFF1E36DF00593C9D1C17C71F4FAE52BE41CBDFA191FBDACF614FA0A72B50FF0E9260A421C816E7851F4DF34AC7A3D4BAC5854ABD4C9AC025C8289611A97E8E13D264B7A0753E6F0B5699CBB0FD8C9BF70727D242ECC23A844A3047E5E259E87E61E2ECAADC636D9FF1B5A3D7CF96A9056AFD0BDBB4C875E681F264E04F3EA03F6D2D2F8CE0DB3E9551BEFCF5CEC3C0A7CF6BBCEAFACF4F32C48229B7526D08ADCA26889695DBBB15592B713A519D4F0B4CE51779FDA4C5399DE4A51D6A1556642DEC4A66743AEEFD3B6DB99712761088397528B59A48970AAED6A24D4077A54A54AFA1C74A50F816E7DCBABE1998F5C6F80E5B0432BE08B2CDCC8C7452FDF05403E447AEB7C83E2185603E73714DF35A80EFF1C40F519B69308483AA3C80F9FBCB59BBB80E0ABC49F33EE6FAEADC186E6F66B708E6C1A446784D55A1BEF7D607F09127A469C5344F1476AE780ECE7ADEB770718449D13DBC6717C0E64C6CE3400573B07BC20F4E8B0371C5BA2B6ED8E4C3DE4FA6A7F44584C3FE7A2A54FA29690FC128D98CA376952F57DB0744937557351BDAA9944ABAA5CACAFAA0CAC9BA65C52AF682AD0AA67263598B7978ED0F0EE5E0ABBFBFEDE7A9BB76E2DA89871062B24FE15131CC132E6DC204A7144CA11E8B26E6CC35948878F35FAE47B53DAD227E4254337B5D26C481781E167430ABBFBB32155133EDFBB0EF34A3A1C82726180EF24AF3E5FB5CF3941B34D4F875A3737DDF866D600DD743989E3C076D359A0087FF1E0455D7FF0E18CF64846D61B311A021D03A2BB6CCB832FD0375324D53539C51EA6D838B1B3F0E014C53672643342879C1E8AE53BAA42B1322A5257EE27A94D603A8E5825C40E4131CC549750795AB8C47643E4B55A49A8D9710B637D2FDA104B4E7188096BB0D5125D1A5707419802453BC2A0B459686C5518D74C448DD7AA1BF33617B61C772936B1114EB6F8CE1A5E72FFED4988D96CB10D90B3D9245D14D006F4B641507E56E94A00F1E0B26B04154E4C1A8272976A2304AD5B6C0B04AD9BE4D911343BA2761D7FE1BCBA6BF4AC1F9437BFAD379A6B0BDCACD963C7A899F99E5087420D1CC9F43C9DB342FC40158733D0939FCF62EEEA8A1461E0334CEB219BD2DF55FAA156338848A226C092682DA0FC2A50029226540FE5F2585EA376DC8BE8019BC7DD1A61F9DA2FC05638206357AF442B82FA8B53919C9D4E1F45CF0A364824EF7458A8E02808212E5EF58E77308A2E2E2B1BA68B2FDCC71BAE748C0F4683815A3C578D91F2CE0C6EA59C9AED565239647D5CB2B5AC24B84F1A2BE59D19DC4A9CA3ED465238053DDC82B54C54DFC2079A6C79A4A3D86D8AB2B195E54AF10F634B935435BE4461E8926525C98A7F31663CC3EAC5AC7FE2919F615876ACC83F2AB42D5AA2418496582885A641D373378AE929A2688E589C67EAF89298726FD52CFF7993D5ED531EC47C1FC8A5D9BF798C5775815FDB6D657784A39C431F7DE6D3A481740503D4D50D96F6863C142962F7D3C04B7CA277B1F4B5B31BBC6AFDEC8B8C30B604FD25174AB297E4E8D68DDF6968E46931D830153ECCEA43A587D0193CF740AB26D779A57A943C485545D105AEB636743A67A6E770899E62FFD16A45789AB9C5D353AA00FC534F8C4A8683045629EB8E5A4F42A962D64BBA230A99265548A1A88796D57C929A92D58295F03416554B746F41CE20A9A2CBA5DD9115B924556845F10AD80A9DC5B2EEA88A74932AB0A2B83B76997B222EA33BBC7B69CF2F6B6C5FD92177BDFD4B83F1346BE230DB5FE52EBF0A54F9DC138BDFD64B60FCFB4EF2497BD25B834F5974633D3E6930F4AB4FED1EBCBEF8345EDEEB316B97DBB505BEE9725F8FD78FB54FCA0DE9A8278A14AD17473EE16837E6C7AC0E8F6AC4735726621AB91961737F8C29F6474C6034FBD39B7A2E664B792E708988BBC031CD123ACCC3FD8343E155CEEEBC90B1E2D8F114C754DD3399FA986D20378BDCA3C8BE43919C29B1C62B9212540A425F10073F4CCCBFD25AC7693C83FD2BFDBC675CC41F89FB670205B751828DBFE5CCCF61B2EA9B8F5A3BFA06A2BB552FFEF89C55DD33AE239831C7C6BE60CB5546B8FE32A2973659D535B459F9BDC4F39D50B587084A546142ACFEEE60EED241DE1CE45AFEE0A3871FFBAAA67C57B016A2E2EDC05078839850F73660152CEDBB00077ED2F45D40BFCEAADF09ACA29AF68D804BFA83892F04BA2F4379CD2D6E358A53D12696A4D4CEAD19D66BA55B6E7B6F9212B1D79AE872B2750FB83512AA5760C633CB451E6C7754A41A0F86BD4D6A3F797EF1AEA41497C91EDBCD24DE64F270C3E5D0379533BC03596E8AAC9DED67066F9A6BBA48EE8EA757F6CBFFDD31B2F15CAEED67F96E9A6CBA30EF8E93AD572EEF8E716D5BFBE79699D6790BDD7A66AE9C64A4B99151C582DB326FB3C0399CF0E7019020F328B30793EA54AFA634D596064B117DA3FA1C33B16169E248ED4A12CDCDF6EB2BDFF01B3BCB659A9BD5646636B5CDD7FFC6B6B94C73DB9A7CC76DE40C2B330E5579DC2DEB58532AD473CA11AEF5A42525BDCD676DBC5E7F4E29C18318A5367B3477C4CF27037810930C39757A64FCCAD7BDB07756FED222ECDFB1BB2C21D8DF5D24D8AEED9A85CC055904F9E62D68948B08119A4B4C91035BEA4944DD05B22914B31873FAE23B8DDBB19B8E39762EC87542C3844297B13FF76A012FE60434B59FA635D7751E5F87E91F2F19A20BA0A6CB62F3D7E45DE27A4EA1F7B92226A48160DE058FE8B2B1A42CB2BB7C2C90AE02D211889BAF708A6EB11F7A00165F9319BAC7ABE806F47B8F97C87E2C23803A90F681A89B7D7CEAA26584FC986394F5E12770D8F11FDEFC0FEEB6713A70540000 , N'6.1.3-40302')


CREATE TABLE Style( -- Car / SUV / Truck / Van 
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	[Description] VARCHAR(30) NOT NULL
)

CREATE TABLE Transmission ( -- Manual / Automatic
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	[Description] VARCHAR(30) NOT NULL
)

CREATE TABLE Color( -- List of possible colors
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	[Name] VARCHAR(30) NOT NULL
)

CREATE TABLE Make( -- Honda, Toyota, etc.
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	[Name] NVARCHAR(30) NOT NULL
	,UserId nvarchar(128) FOREIGN KEY REFERENCES [AspNetUsers](Id)  not null ,
	DataAdded DateTime2 not null default (getdate())

)

CREATE TABLE Model( -- Accord, Camry, etc.
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	MakeId INT FOREIGN KEY REFERENCES Make(Id) NOT NULL,
	[Name] NVARCHAR(30) NOT NULL
		,UserId nvarchar(128) FOREIGN KEY REFERENCES [AspNetUsers](Id)  not null ,
	DataAdded DateTime2 not null default (getdate())

)

CREATE TABLE Vehicle( -- includes all vehicles ever in stock
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Vin VARCHAR(17) UNIQUE NOT NULL,
	ModelId INT FOREIGN KEY REFERENCES Model(Id) NOT NULL,
	[Year] SMALLINT NOT NULL,
	New BINARY NOT NULL,

	StyleId INT FOREIGN KEY REFERENCES Style(Id) NOT NULL,
	TransmissionId INT FOREIGN KEY REFERENCES Transmission(Id) NOT NULL,
	InteriorId INT FOREIGN KEY REFERENCES Color(Id) NOT NULL,
	ExteriorId INT FOREIGN KEY REFERENCES Color(Id) NOT NULL,
	Mileage INT NOT NULL,

	MSRP MONEY NOT NULL,
	[Description] NVARCHAR(500) NOT NULL, --use empty string if needed
	ImageFile VARCHAR(255) NOT NULL
		,UserId nvarchar(128) FOREIGN KEY REFERENCES [AspNetUsers](Id)  not null ,
	DataAdded DateTime2 not null default (getdate())

)

/* Sales info */

CREATE TABLE Stock (
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	VehicleId INT FOREIGN KEY REFERENCES Vehicle(Id) NOT NULL,
	FloorPrice MONEY NOT NULL,
	Available BINARY NOT NULL,
	Feature BINARY NOT NULL
)

CREATE TABLE Special (
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	[Name] NVARCHAR(70) NOT NULL,
	[Description] NVARCHAR(500) NOT NULL -- use empty string if needed
)



CREATE TABLE [State] (
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	[Name] VARCHAR(30) NOT NULL,
	Code VARCHAR(2) NOT NULL
)

CREATE TABLE Customer (
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	FirstName NVARCHAR(70) NOT NULL,
	LastName NVARCHAR(70) NOT NULL,
	Phone VARCHAR(15) NOT NULL, -- use empty string if needed
	Email VARCHAR(255) NOT NULL, -- use empty string if needed
	Street1 VARCHAR(100) NOT NULL,
	Street2 VARCHAR(100) NOT NULL,
	City VARCHAR(30) NOT NULL,
	StateId INT FOREIGN KEY REFERENCES [State](Id),
	ZipCode VARCHAR(5) NOT NULL
)

CREATE TABLE PurchaseType ( -- Bank finance / Cash / Dealer finance
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	[Description] VARCHAR(30) NOT NULL
)

CREATE TABLE Sales (
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	CustomerId INT FOREIGN KEY REFERENCES Customer(Id) NOT NULL,
	UserId nvarchar(128) FOREIGN KEY REFERENCES [AspNetUsers](Id)  not null ,

	VehicleId INT FOREIGN KEY REFERENCES Vehicle(Id) NOT NULL,
	[Date] DateTime2 NOT NULL,
	PurchasePrice MONEY NOT NULL,
	PurchaseTypeId INT FOREIGN KEY REFERENCES PurchaseType(Id) NOT NULL
)

/* Contact info */

CREATE TABLE Contact (
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	FirstName NVARCHAR(70) NOT NULL,
	LastName NVARCHAR(70) NOT NULL,
	Phone VARCHAR(15) NOT NULL, -- use empty string if needed
	Email VARCHAR(255) NOT NULL -- use empty string if needed
)

CREATE TABLE Inquiry (
	Id INT IDENTITY(1, 1) PRIMARY KEY NOT NULL,
	ContactId INT FOREIGN KEY REFERENCES Contact(Id) NOT NULL,
	[Message] NVARCHAR(2000) NOT NULL, -- use empty string if needed
	VehicleID INT FOREIGN KEY REFERENCES Vehicle(Id) NULL
)